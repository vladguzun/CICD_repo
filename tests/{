Script started on 2025-09-05 11:28:23+00:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="209" LINES="51"]
[?2004h]0;vlad@kbt: ~/CDCI/tests[01;32mvlad@kbt[00m:[01;34m~/CDCI/tests[00m$ vim[K[K[Kcd ..
[?2004l[?2004h]0;vlad@kbt: ~/CDCI[01;32mvlad@kbt[00m:[01;34m~/CDCI[00m$ c[Kvi [Km Jenkinsfile 
[?2004l[?1049h[22;0;0t[>4;2m[?1h=[?2004h[?1004h[1;51r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[51;1H"Jenkinsfile" 104L, 2708B[2;1Hâ–½[6n[2;1H  [3;1HPzz\[0%m[6n[3;1H           [1;1H[>c]10;?]11;?[1;1Hpipeline {
  agent [36many[m[2;12H[K[3;1H[K[4;3Hoptions {
    ansiColor([31m'xterm'[m)
    timestamps()
  }

  environment {
    IMAGE = [31m'vladdocker/cicd-flask'[m[7C[34m// change if you want a different repo[m
    TAG   = [31m"[m[36m${env.BUILD_NUMBER}[m[31m"[m[9C[34m// numeric build tag[m
  }

  stages {
    stage([31m'Checkout'[m) {[16;7Hsteps {[17;9Hcheckout scm[18;7H}
    }[21;5Hstage([31m'Unit tests (venv in python:3.11-slim)'[m) {[22;7Hsteps {[23;9Hscript {[24;11H[34m// Run a temporary python container, create a venv, install deps, run pytest[m[25;11Hdocker.image([31m'python:3.11-slim'[m).inside([31m'-e HOME=/tmp'[m) {[26;13Hsh [31m'''
              set -e
              export PYTHONPATH=$PWD
              python -m venv .venv
              . .venv/bin/activate
              python --version
              pip install -U pip
              [ -f requirements.txt ] && pip install -r requirements.txt
              pip install pytest
              [ -d tests ] && pytest -q || echo "No tests/ directory, skipping"
            '''[m[37;11H}[38;9H}[39;7H}
    }[42;5Hstage([31m'Docker build'[m) {[43;7Hsteps {[44;9Hsh [31m'''
          set -e
          docker build -t "$IMAGE:$TAG" -t "$IMAGE:latest" .
        '''[m[48;7H}
    }[51;192H32,1[10CTop[32;1H[?25h[?4m[?12$p[?25l[51;182H/[32;1H[51;183H0[32;1H[51;184Hc[32;1H[51;185H0[32;1H[51;186Hc[32;1H[51;187H/[32;1H[51;188H0[32;1H[51;189Hc[32;1H[51;190H0[32;1H[51;191Hc[32;1H[51;182H          [32;1H[27m[23m[29m[m[H[2J[1;1Hpipeline {
  agent [1m[96many[m

  options {
    ansiColor([95m'xterm'[m)
    timestamps()
  }

  environment {
    IMAGE = [95m'vladdocker/cicd-flask'[m[7C[96m// change if you want a different repo[m
    TAG   = [95m"[m[1m[96m${env.BUILD_NUMBER}[m[95m"[m[9C[96m// numeric build tag[m
  }

  stages {
    stage([95m'Checkout'[m) {[16;7Hsteps {[17;9Hcheckout scm[18;7H}
    }[21;5Hstage([95m'Unit tests (venv in python:3.11-slim)'[m) {[22;7Hsteps {[23;9Hscript {[24;11H[96m// Run a temporary python container, create a venv, install deps, run pytest[m[25;11Hdocker.image([95m'python:3.11-slim'[m).inside([95m'-e HOME=/tmp'[m) {[26;13Hsh [95m'''
              set -e
              export PYTHONPATH=$PWD
              python -m venv .venv
              . .venv/bin/activate
              python --version
              pip install -U pip
              [ -f requirements.txt ] && pip install -r requirements.txt
              pip install pytest
              [ -d tests ] && pytest -q || echo "No tests/ directory, skipping"
            '''[m[37;11H}[38;9H}[39;7H}
    }[42;5Hstage([95m'Docker build'[m) {[43;7Hsteps {[44;9Hsh [95m'''
          set -e
          docker build -t "$IMAGE:$TAG" -t "$IMAGE:latest" .
        '''[m[48;7H}
    }[51;192H32,1[10CTop"Jenkinsfile" 104L, 2708B[32;1H[?25h[?25l[51;182H^[[32;1H[51;182H  [32;1H[51;182H^[[32;1H[51;182H  [32;1H[?25h[?25l[51;182H:[32;1H[51;1H[K[51;1H:[?25h%d[?25l[1;1H[1;1H[K[2;1H[94m~                                                                                                                                                                                                                [3;1H~                                                                                                                                                                                                                [4;1H~                                                                                                                                                                                                                [5;1H~                                                                                                                                                                                                                [6;1H~                                                                                                                                                                                                                [7;1H~                                                                                                                                                                                                                [8;1H~                                                                                                                                                                                                                [9;1H~                                                                                                                                                                                                                [10;1H~                                                                                                                                                                                                                [11;1H~                                                                                                                                                                                                                [12;1H~                                                                                                                                                                                                                [13;1H~                                                                                                                                                                                                                [14;1H~                                                                                                                                                                                                                [15;1H~                                                                                                                                                                                                                [16;1H~                                                                                                                                                                                                                [17;1H~                                                                                                                                                                                                                [18;1H~                                                                                                                                                                                                                [19;1H~                                                                                                                                                                                                                [20;1H~                                                                                                                                                                                                                [21;1H~                                                                                                                                                                                                                [22;1H~                                                                                                                                                                                                                [23;1H~                                                                                                                                                                                                                [24;1H~                                                                                                                                                                                                                [25;1H~                                                                                                                                                                                                                [26;1H~                                                                                                                                                                                                                [27;1H~                                                                                                                                                                                                                [28;1H~                                                                                                                                                                                                                [29;1H~                                                                                                                                                                                                                [30;1H~                                                                                                                                                                                                                [31;1H~                                                                                                                                                                                                                [32;1H~                                                                                                                                                                                                                [33;1H~                                                                                                                                                                                                                [34;1H~                                                                                                                                                                                                                [35;1H~                                                                                                                                                                                                                [36;1H~                                                                                                                                                                                                                [37;1H~                                                                                                                                                                                                                [38;1H~                                                                                                                                                                                                                [39;1H~                                                                                                                                                                                                                [40;1H~                                                                                                                                                                                                                [41;1H~                                                                                                                                                                                                                [42;1H~                                                                                                                                                                                                                [43;1H~                                                                                                                                                                                                                [44;1H~                                                                                                                                                                                                                [45;1H~                                                                                                                                                                                                                [46;1H~                                                                                                                                                                                                                [47;1H~                                                                                                                                                                                                                [48;1H~                                                                                                                                                                                                                [49;1H~                                                                                                                                                                                                                [50;1H~                                                                                                                                                                                                                [m[51;192H0,0-1[9CAll--No lines in buffer--[51;192H[K[51;192H0,0-1[9CAll[1;1H[?25h[?25l[51;1H[1m-- INSERT --[m[51;13H[K[51;192H0,1[11CAll[1;1Hpipeline {
    agent [1m[96many[m[2;14H[K[3;1H[K[4;1H    environment {[4;18H[K[5;1H        IMAGE =[5;16H[K[5;16H[?25h[?25l [95m"vladdocker/cicd-flask"[m
      [6;7H[K[6;7H[?25h[?25l  TAG = [95m"[m[1m[96m${env.BUILD_NUMBER}[m[95m"[m
    }[7;6H[K[8;1H[K[9;1H    stages {[9;13H[K[10;1H    [10;5H[K[10;5H[?25h[?25l    stage([95m'Checkout'[m) {
            steps [11;19H[K[11;19H[?25h[?25l{
                checkout scm[12;29H[K[13;1H            }[13;14H[K[14;1H        }[14;10H[K[15;1H[K[16;1H        [16;9H[K[16;9H[?25h[?25lstage([95m'Unit tests (venv in python:3.11-slim)'[m) {
            ste[17;16H[K[17;16H[?25h[?25lps {
                script {[18;25H[K[19;1H                    docker.image([95m'[m[19;35H[K[19;35H[?25h[?25l[95mpython:3.11-slim'[m).inside {
                        sh [95m'''[m[20;31H[K[21;1H[95m    [m[21;5H[K[21;5H[?25h[?25l[95m                        set -e
                            pyth[m[22;33H[K[22;33H[?25h[?25l[95mon -m venv .venv
                            . .venv/bin/activa[m[23;47H[K[23;47H[?25h[?25l[95mte
                            python --version[m[24;45H[K[25;1H[95m               [m[25;16H[K[25;16H[?25h[?25l[95m             pip install -U pip
                            if [m[26;32H[K[26;32H[?25h[?25l[95m[ -f requirements.txt ]; then
                                p[m[27;34H[K[27;34H[?25h[?25l[95mip install -r requirements.txt
                            fi[m[28;31H[K[29;1H[95m [m[29;2H[K[29;2H[?25h[?25l[95m                           pip install pytest
                 [m[30;18H[K[30;18H[?25h[?25l[95m           [ -d tests ] && pytest -q || echo "No tests/ directo[?25h[?25lry, skipping"
                        '''[m[31;28H[K[32;1H                    }[32;22H[K[32;22H[?25h[?25l
                